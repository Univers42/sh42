# Echo/quoting edge cases
# combinations of quotes, escapes, env expansion, flags

echo ""
echo ''
echo "hello world"
echo 'hello world'
echo hello" world"
echo hello' world'
echo "a\"b"   # embedded double quote
echo 'a\'b'      # backslash in single quotes (should be literal)
echo "a\\b"   # backslash in double quotes

echo -n "no newline"
echo -n -n hello

envvar=world
export envvar
echo $envvar
unset envvar

echo "$USER$HOME"
echo '$USER$HOME'
echo "'$USER'"

echo ""-n run_echo

echo "-n" run_echo

echo "-nnn" run_echo

echo "-n -nn" run_echo

echo "\$USER"

echo "\$UNSET"

echo "\$(echo hi)"

echo "foo\nbar" # literal \n inside double quotes

echo $''

echo '"'

echo "'"

echo "a'b"c

echo "a\"b\"c"

echo "\"-n\""

echo -n "line1\nline2"

# tricky concatenations
echo ""$USER"""end"
echo "$USER""end"
echo "$USER''end"

echo "  spaced   "
echo "    "

echo "\""
echo '\"'

echo $NOTSET default

echo "$NOTSET default"

echo "$?"

echo 'a"b\'c'

# complex: nested mix
export kk="echo -n msg1"
$kk msg2
export kk="-n -nnn"
echo $kk hi

# edge: multiple -n flags and quoted -n
echo -n -n -n hello
echo "-n" -n hello

echo "trailing=")

echo "=start"
echo "==double"

echo "===triple"

# ensure lines are diverse
""
''
"test 'mix' and \"esc\""

# Double-quote escape matrix (compare against bash --posix semantics)
# Each line tests different numbers of backslashes before a character
echo "a\\n"        # backslash + n should remain literal (a\n)
echo "a\\\\n"    # two backslashes -> one literal backslash + n (a\\n)
echo "a\\\\\\n"# three backslashes -> two literal backslashes + n (a\\\\n)
echo "a\\\\\\\\n" # four backslashes

echo "a\\r"        # backslash + r (a\r)
echo "a\\t"        # backslash + t (a\t)
echo "a\\b"        # backslash + b (a\b)
echo "a\\e"        # backslash + e (a\e)

echo "a\\\\"      # trailing double-backslash inside quotes

echo "\"quoted\""  # escaped double quotes inside double quotes
echo "dollar:\$USER"  # escaped dollar sign should prevent expansion

echo "mix \\\"end" # mix of backslashes and escaped quote

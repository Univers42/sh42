@media (max-width: 991px) {
    .doc-wrap { grid-template-columns: 1fr; }
    .doc-aside { position: static; }
}

@media (max-width: 991px) {
  .doc-wrap { grid-template-columns: 1fr; }
  .doc-aside { position: static; }
}

@media (max-width: 991px) { .doc-wrap { grid-template-columns: 1fr; } }

/* responsive: stack footer elements on small screens */
@media (max-width: 767px) {
  .hell-footer .row { flex-direction: column; gap: .5rem; align-items: center; }
  .hell-footer .col-4 { width: 100%; max-width: 100%; text-align: center !important; }
  .hell-footer .kv { text-align: center; }
}

/* medium screens */
@media (max-width: 1399px) and (min-width: 768px) {
  .doc-wrap {
    grid-template-columns: 2fr minmax(220px, var(--h-aside-width));
  }
}

/* small / mobile: stack */
@media (max-width: 767px) {
  .doc-wrap {
    grid-template-columns: 1fr;
  }
  /* aside flows below content on mobile */
  .doc-aside { position: static; width: 100%; max-width: 100%; }
}

/* On very wide screens, keep a comfortable measure so lines do not become too long */
@media (min-width: 1600px) {
  .article-stage > article .component-card {
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
  }
}

/* responsive */
@media (max-width: 991px) {
  .nav-list { display:none; }
  .header-cta { display:none; }
  .brand-sub { display:none; }
  .header-inner { padding: 0.7rem 1rem; }
  .site-header { min-height:72px; }
}

/* mobile behavior: hide desktop nav, show mobile toggle */
@media (max-width: 991px) {
  .nav-list { display: none; }
  .header-cta { display: none; }
  .brand-sub { display: none; }
  .header-inner { padding: 0.7rem 1rem; }
  .site-header { min-height:72px; }
}

/* show mobile toggle on narrow viewports */
@media (max-width: 991px) {
  .mobile-toggle {
    display: inline-grid !important;
  }
}

/* collapse behavior on small screens: aside becomes togglable */
@media (max-width: 991px) {
    .doc-aside-card { position: relative; top: auto; max-height: none; box-shadow:none; border: none; padding: .75rem 0; }
    
}

/* responsive: tighter grid on small screens */
@media (max-width: 900px) {
  .entry-grid { grid-template-columns: repeat(auto-fit, minmax(180px,1fr)); gap: .75rem; }
  .entry-inner { padding: 1rem; border-radius: 12px; }
}

/* Desktop layout -> keep aside sticky on large screens */
@media (min-width: 992px) {
  .doc-wrap { grid-template-columns: 3fr minmax(260px, var(--hellish-aside-width)); }
  .doc-aside-card { position: sticky; } /* explicit: keep sticky enabled */
}

/* Tablet */
@media (min-width: 768px) and (max-width: 991px) {
  .doc-wrap { grid-template-columns: 2fr minmax(220px, var(--hellish-aside-width)); }
  /* keep aside sticky on tablet when there is space */
  .doc-aside-card { position: sticky; top: calc(var(--header-height, 96px) + 12px); }
}

/* Mobile: aside becomes normal flow */
@media (max-width: 767px) {
  .doc-wrap { grid-template-columns: 1fr; padding: 0 0.5rem; }
  .doc-aside { position: static; width: 100%; max-width: 100%; }
  .doc-aside-card { position: static; max-height: none; overflow: visible; padding-bottom: 1rem; }
  main { padding-bottom: calc(var(--footer-height, 72px) + 1.5rem); }
}

/* When aside becomes normal flow on small screens, ensure footer/padding prevents overlap */
@media (max-width: 767px) {
  main { padding-bottom: calc(var(--footer-height, 72px) + 1.5rem); }
  .mobile-menu.active { z-index: 1700; } /* ensure mobile menu overlays footer when open */
}

/* Slight adjustment for wide screens: keep floating TOC at a comfortable distance from the aside */
@media (min-width: 1600px) {
  .floating-toc { right: calc((100% - 1400px) / 2 + var(--hellish-aside-width, 320px) + 28px); }
}
